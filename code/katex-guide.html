<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<link rel="stylesheet" href="/conway.min.css">
<script defer src="/conway-render.min.js"></script>
<title>How to render mathematical equations using KaTeX — Conway's site</title>
</head>
<body onload="dateRender();">
<header><nav><ul>
<li><a href="/" title="Home page">Home</a></li>
<li><a href="#" title="Jump back to top">Top</a></li>
<li><a href="#steps" title="Steps">Steps</a></li>
<li><a href="#cite" title="Cite this page">Cite</a></li>
</ul></nav></header>
<h1>How to render mathematical equations using KaTeX</h1>
<p class="page-properties">
First created:&nbsp;20190529<br>
Last modified:&nbsp;<b>20191031</b><br>
<b>Demo:</b>
<a href="/katex-example.html" title="katex-example.html"><code>katex-example.html</code></a>
</p>
<p>
This is a step-by-step guide demonstrating how I have rendered
mathematical equations on this site using
<a href="https://katex.org/" title="katex.org">KaTeX</a> (CSS and JavaScript only).
</p>
<p>
It is based on
<a href="http://sixthform.info/katex/guide.html" title="Simple guide to using KaTeX">Steve Mayer's guide</a>,
which I have built on by:
</p>
<ol class="sparse-list">
<li>
Combining the CSS and JavaScript for the
<a href="https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex" title="Copy-tex extension">copy-tex extension</a>
together with KaTeX proper's CSS and JavaScript so that they
do not need to be loaded separately; and
</li>
<li>
Automatically defining some commonly used macros of mine
through KaTeX's <code>macros</code> option.
</li>
</ol>
<p>
I am not using Steve's <code>document.body.innerHTML</code> replacements.
</p>
<h2 id="steps"><a class="self-link" href="#steps"></a>
Steps
</h2>
<h3>1.&nbsp;KaTeX</h3>
<p>
<span class="lightyellow">
Download a release of KaTeX from
<a href="https://github.com/KaTeX/KaTeX/releases" title="GitHub: KaTeX releases">GitHub</a>.
</span>
</p>
<h3>2.&nbsp;Fonts folder</h3>
<p>
<span class="lightyellow">
Put the <code>fonts</code> folder into your root directory.
</span>
</p>
<h3>3.&nbsp;CSS</h3>
<p>
<span class="lightyellow">
Put
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-katex.css" title="conway-katex.css"><code>conway-katex.css</code></a>
(or the
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-katex.min.css" title="conway-katex.min.css">minified version</a>)
into your root directory.
</span>
This style sheet was made by combining an edited version of <code>katex.css</code>
(edited so that <code>@font-face</code> is called with <code>font-display: swap</code>)
with
<a href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/copy-tex.css" title="copy-tex.css"><code>copy-tex.css</code></a>
(from the
<a href="https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex" title="Copy-tex extension">copy-tex extension</a>,
which makes equations copy as their source code).
</p>
<h3>4.&nbsp;JavaScript</h3>
<p>
<span class="lightyellow">
Put
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-katex.js" title="conway-katex.js"><code>conway-katex.js</code></a>
(or the
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-katex.min.js" title="conway-katex.min.js">minified version</a>)
into your root directory.
</span>
This script was made by combining <code>katex.js</code> with an edited version of
<a href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/copy-tex.js" title="copy-tex.js"><code>copy-tex.js</code></a>
(edited so that the display math delimiters are <code>\[</code> and <code>\]</code>
rather than <code>$$</code> and <code>$$</code>).
</p>
<h3>5.&nbsp;Automatic rendering</h3>
<p>
<span class="lightyellow">
Put
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-render.js" title="conway-render.js"><code>conway-render.js</code></a>
(or the
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-render.min.js" title="conway-render.min.js">minified version</a>)
into your root directory.
</span>
You will only need the function <code>mathsRender</code>;
the other code is unrelated to equation rendering.
The script is based on Steve Mayer's
<a href="http://sixthform.info/katex/guide.html#jsfile" title="smrender.js"><code>smrender.js</code></a>.
I am no longer using Steve's <code>document.body.innerHTML</code>
replacements because they destroy event handlers,
so yes, you will need to type
<code>&lt;span class="maths"&gt; {...} &lt;/span&gt;</code> for inline equations and
<code>&lt;div class="maths"&gt; {...} &lt;/div&gt;</code> for display equations
(unless you are using
<a href="/code/cch-to-html.html" title="Python: a regex converter from CCH to HTML">my concise HTML</a>,
in which case you can use <code>&lt;$&gt; {...} &lt;/$&gt;</code> for inline equations
and <code>&lt;$$&gt; {...} &lt;/$$&gt;</code> for display equations).
</p>
<p>
The following macros are defined automatically
(the double backslashes are required in JavaScript; see <code>MACROS</code> in
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/conway-render.js" title="conway-render.js"><code>conway-render.js</code></a>):
</p>
<pre>
{
  '\\del' : '\\mathop{}\\!\\boldsymbol{\\nabla}',
  '\\dotp': '\\boldsymbol{\\cdot}',
  '\\ee'  : '\\mathrm{e}',
  '\\eps' : '\\varepsilon',
  '\\ii'  : '\\mathrm{i}',
  '\\pd'  : '\\mathop{}\\!\\partial',
  '\\td'  : '\\mathop{}\\!\\mathrm{d}',
  '\\unit': '\\mathop{}\\!\\text{#1}',
  '\\vec' : '\\mathbf{#1}',
  '\\veca': '\\mathop{}\\!\\vec{a}'
}
</pre>
<p>
To overwrite these or to define other commands for use in a page,
use <code>\gdef</code> or <code>\global\def</code>
(which will persist between expressions).
</p>
<h3>6.&nbsp;HTML page</h3>
<p>
<b>Demo:</b>
<a href="/katex-example.html" title="katex-example.html"><code>katex-example.html</code></a>
</p>
<p>
<span class="lightyellow">
Put the following (almost) minimal example into your root directory.
</span>
If you are using the minified versions of the CSS and JavaScript above,
insert <code>.min</code> before the extensions.
</p>
<pre>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"&gt;
&lt;link rel="stylesheet" href="conway-katex.css"&gt;
&lt;script defer src="conway-katex.js"&gt;&lt;/script&gt;
&lt;script defer src="conway-render.js"&gt;&lt;/script&gt;
&lt;title&gt;KaTeX example&lt;/title&gt;
&lt;/head&gt;
&lt;body onload="mathsRender();"&gt;
&lt;h1&gt;KaTeX equation rendering: an (almost) minimal example&lt;/h1&gt;
&lt;p&gt;
  &lt;a
    href="https://yawnoc.github.io/code/katex-guide.html"
    title="How to render equations using KaTeX"
  &gt;[back to Conway's step-by-step KaTeX guide]&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;
  Inline: we have
  &lt;span class="maths"&gt;\td (u v) = u \td v + v \td u&lt;/span&gt;.
  Display:
&lt;/p&gt;
&lt;div class="maths"&gt;
  1 + \frac{1}{2^2} + \frac{1}{3^2} + \dots = \frac{\pi^2}{6}.
&lt;/div&gt;
&lt;p&gt;
  Testing macros defined automatically by &lt;code&gt;mathsRender&lt;/code&gt;:
&lt;/p&gt;
&lt;div class="maths"&gt;
\begin{aligned}
  \veca_x \dotp \veca_y &amp;amp;= 0 \\
  \ee^{\ii \pi} + 1 &amp;amp;= 0 \\
  (x + \td x)^2 &amp;amp;= x^2 + 2 x \td x \\
  (\vec{x} + \td\vec{x})^2 &amp;amp;= \vec{x}^2 + 2 \vec{x} \dotp \td\vec{x} \\
  \eps &amp;amp;\ll 1 \\
  \del^2 u &amp;amp;= \frac{\pd^2 u}{{\pd x}^2} + \frac{\pd^2 u}{{\pd y}^2} \\
  3 \unit{斤} &amp;amp;= 4 \unit{lb}
\end{aligned}
&lt;/div&gt;
&lt;p&gt;
  &lt;span class="maths"&gt;
    \gdef\pow#1#2{{#1}^{#2}}
    \gdef\suits{\spades \hearts \clubs \diamonds}
  &lt;/span&gt;
  Testing macros defined in this page: &lt;span class="maths"&gt;\pow{x}{y}&lt;/span&gt;
  and &lt;span class="maths"&gt;\suits&lt;/span&gt;.
  Finally, a deliberate typo to show the error message:
&lt;/p&gt;
&lt;div class="maths"&gt;
  \frack{1}{2}
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h2 id="cite"><a class="self-link" href="#cite"></a>
Cite this page
</h2>
<ul>
<li>Text:
<p>
Conway&nbsp;(2019).
<i>How to render mathematical equations using KaTeX</i>.
&lt;https://yawnoc.github.io/code/katex-guide.html&gt;
[Accessed <span class="date">d&nbsp;month&nbsp;yyyy</span>]
</p>
</li>
<li>BibTeX:
<pre>
@misc{conway-katex,
  author = {Conway},
  year = {2019},
  title = {How to render mathematical equations using {KaTeX}},
  howpublished = {\url{https://yawnoc.github.io/code/katex-guide.html}},
  note = {[Accessed <span class="date">d~month~yyyy</span>]}
}
</pre>
</li>
<li>BibLaTeX:
<pre>
@online{conway-katex,
  author = {Conway},
  year = {2019},
  title = {How to render mathematical equations using {KaTeX}},
  url = {https://yawnoc.github.io/code/katex-guide.html},
  urldate = {<span class="date">yyyy-mm-dd</span>}
}
</pre>
</li>
</ul>
<footer>
<hr>
©&nbsp;2019&nbsp;Conway.
</footer>
</body>
</html>