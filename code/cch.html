<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="author" content="Conway">
<meta name="description" content="A regex converter from Conway's concise HTML (CCH) to standard (HTML), written in Python.">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<link rel="stylesheet" href="/conway.min.css">
<link rel="stylesheet" href="/conway-katex.min.css">
<script defer src="/conway-katex.min.js"></script>
<script defer src="/conway-render.min.js"></script>
<title>Python: a regex converter from CCH to HTML | Conway's site</title>
</head>
<body onload="dateRender(); mathsRender(); romanisationInitialise();">
<header><nav><ul>
<li><a href="/" title="Home page">Home</a></li>
<li><a href="#" title="Jump back to top">Top</a></li>
<li><a href="#cite" title="Cite this page">Cite</a></li>
</ul></nav></header>
<h1>Python: a regex converter from CCH to HTML</h1>
<p class="page-properties">
First created:&nbsp;20190720<br>
Last modified:&nbsp;<b>20200316</b><br>
<b>Code:</b>
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/cch.py" title="GitHub: cch.py"><code>cch.py</code></a>
<noscript>Enable Javascript for <a href="/code/katex-guide.html" title="How to render mathematical equations using KaTeX">equation rendering</a> to work.</noscript>
</p>
<nav><ul>
<li><a href="#supreme" title="Supreme elements"><b>Supreme:</b></a></li>
<li><a href="#display-code" title="Display code element"><code>&lt;``&gt;</code></a></li>
<li><a href="#inline-code" title="Inline code element"><code>&lt;`&gt;</code></a></li>
<li><a href="#html-comment" title="HTML comment element"><code>&lt;!-- --&gt;</code></a></li>
<li><a href="#html-script" title="HTML script element"><code>&lt;script&gt;</code></a></li>
<li><a href="#user-defined-definition" title="User-defined definition element"><code>&lt;% %&gt;</code></a></li>
<li><a href="#display-maths" title="Display maths element"><code>&lt;$$&gt;</code></a></li>
<li><a href="#inline-maths" title="Inline maths element"><code>&lt;$&gt;</code></a></li>
<li><a href="#inline-maths-definition" title="Inline maths definition element"><code>&lt;$d&gt;</code></a></li>
<li><a href="#zero-argument" title="Zero-argument elements"><b>0-arg:</b></a></li>
<li><a href="#item-anchor-abbreviation" title="Item anchor abbreviation element"><code>&lt;@ih&gt;</code></a></li>
<li><a href="#assisting-romanisation-radio" title="Assisting romanisation radio element"><code>&lt;^^&gt;</code></a></li>
<li><a href="#svg-style-abbreviation" title="SVG style abbreviation element"><code>&lt;-t&gt;</code></a></li>
<li><a href="#multiple-argument" title="Multiple-argument elements"><b>Multi-arg:</b></a></li>
<li><a href="#dialogue-image" title="Dialogue image element"><code>&lt;+h&gt;</code></a></li>
<li><a href="#image" title="Image element"><code>&lt;+&gt;</code></a></li>
<li><a href="#assisting-romanisation" title="Assisting romanisation element"><code>&lt;^&gt;</code></a></li>
<li><a href="#cantonese-mandarin-romanisation" title="Cantonese &amp; Mandarin romanisation element"><code>&lt;^cm&gt;</code></a></li>
<li><a href="#directed-triangle-anchor" title="Directed triangle anchor element"><code>&lt;@u&gt;</code></a></li>
<li><a href="#item-anchor" title="Item anchor element"><code>&lt;@i&gt;</code></a></li>
<li><a href="#heading-self-link-anchor" title="Heading self-link anchor element"><code>&lt;@2&gt;</code></a></li>
<li><a href="#anchor" title="Anchor element"><code>&lt;@&gt;</code></a></li>
<li><a href="#boxed-translation" title="Boxed translation element"><code>&lt;#t&gt;</code></a></li>
<li><a href="#sun-tzu-heading" title="Sun&nbsp;Tzŭ heading element"><code>&lt;;sh&gt;</code></a></li>
<li><a href="#sun-tzu-link-division" title="Sun&nbsp;Tzŭ link division element"><code>&lt;;s@@&gt;</code></a></li>
<li><a href="#preamble" title="Preamble element"><code>&lt;*&gt;</code></a></li>
<li><a href="#page-properties" title="Page properties element"><code>&lt;*p&gt;</code></a></li>
<li><a href="#cite-this-page" title="Cite this page element"><code>&lt;*c&gt;</code></a></li>
<li><a href="#footer" title="Footer element"><code>&lt;*f&gt;</code></a></li>
<li><a href="#single-argument" title="Single-argument elements"><b>1-arg:</b></a></li>
<li><a href="#assisting-numeral" title="Assisting numeral element"><code>&lt;_&gt;</code></a></li>
<li><a href="#formatted-span" title="Formatted span element"><code>&lt;:r&gt;</code></a></li>
<li><a href="#boxed-division" title="Boxed division element"><code>&lt;#&gt;</code></a></li>
<li><a href="#dialogue-division" title="Dialogue division element"><code>&lt;~~&gt;</code></a></li>
<li><a href="#dialogue-paragraph" title="Dialogue paragraph element"><code>&lt;~h&gt;</code></a></li>
<li><a href="#link-division" title="Link division element"><code>&lt;@@&gt;</code></a></li>
<li><a href="#header-navigation-bar" title="Header navigation bar element"><code>&lt;=h&gt;</code></a></li>
<li><a href="#navigation-bar" title="Navigation bar element"><code>&lt;=&gt;</code></a></li>
<li><a href="#note-paragraph" title="Note paragraph element"><code>&lt;.&gt;</code></a></li>
<li><a href="#overflowing-division" title="Overflowing division element"><code>&lt;!&gt;</code></a></li>
<li><a href="#svg-style-container" title="SVG style container element"><code>&lt;--&gt;</code></a></li>
<li><a href="#text-romanisation" title="Text romanisation element"><code>&lt;^e&gt;</code></a></li>
<li><a href="#text-numeral" title="Text numeral element"><code>&lt;_e&gt;</code></a></li>
<li><a href="#escapes" title="Escapes"><b>Escapes</b></a></li>
<li><a href="#conway-italics" title="Conway italics"><b><code>{}</code></b></a></li>
<li><a href="#whitespace" title="Whitespace"><b>Whitespace</b></a></li>
<li><a href="#automatic-chinese-span" title="Automatic Chinese language spans"><b><code>lang</code>&nbsp;spans</b></a></li>
</ul></nav>
<p>
For the sole purpose of building this site, I wrote a Python program
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/cch.py" title="GitHub: cch.py"><code>cch.py</code></a>
which converts Conway's concise HTML (CCH) to standard HTML
using regular expression replacements.
</p>
<p>
CCH consists mostly of HTML-like tags,
but with names starting with a punctuation character.
By design, CCH is more readable and require fewer keystrokes
than normal HTML (and Notepad++ is able to auto-complete tags for both),
mostly by using pipe-delimited arguments rather than HTML attributes.
For instance compare the CCH code
</p>
<pre>
&lt;+&gt; image.png | Alt text | Title text | 300 | class-name &lt;/+&gt;
</pre>
<p>
to the equivalent HTML code
</p>
<pre>
&lt;img class="class-name" src="image.png" alt="Alt text" title="Title text" width="300"&gt;
</pre>
<p>
Also CCH has many convenient backslash-escaped abbreviations;
e.g.&nbsp;<code>\&lt;</code> gets converted to the HTML&nbsp;<code>&amp;lt;</code>
and renders as&nbsp;&lt;.
CCH can be used in conjunction with normal HTML elements
(except the <code>&lt;head&gt;</code> element and a few others
which are generated automatically).
</p>
<p>
This page
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/code/cch.html" title="GitHub: cch.html"><code>cch.html</code></a>
was generated from
<a href="https://github.com/yawnoc/yawnoc.github.io/blob/master/code/cch.cch" title="GitHub: cch.cch"><code>cch.cch</code></a>
by running <code>cch.py code/cch</code>,
and it serves as both the documentation and an example.
</p>
<p>
Finally, I am indebted unto <b>J.H.</b>, without whom this converter would not exist,
due to lack of motivation to start writing it (and learn Python).
</p>
<p>
CCH in canonical order, which is roughly the order in which
the regex replacements are performed, is as thus:
</p>
<h2 id="supreme"><a class="self-link" href="#supreme"></a>
Supreme elements
</h2>
<p>
Each of these elements is immune to any other elements or processing
lower than it in this page.
For example, the normal
<a href="#html-comment" title="HTML comment element">HTML comment element <code>&lt;!-- --&gt;</code></a>
yields to the
<a href="#display-code" title="Display code element">display code element <code>&lt;``&gt; {content} &lt;/``&gt;</code></a>
and the
<a href="#inline-code" title="Inline code element">inline code element <code>&lt;`&gt; {content} &lt;/`&gt;</code></a>,
but prevails over all else.
</p>
<h3 id="display-code"><a class="self-link" href="#display-code"></a>
Display code element
</h3>
<div class="boxed">
<code>&lt;``&gt; {content} &lt;/``&gt;</code>
</div>
<p>
Converted to a <code>&lt;pre&gt;</code> element,
with automatic escaping of <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code>,
and automatic de-indentation, for <code>{content}</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;``&gt;
  if x == 1 &amp;&amp; y &lt; 0
&lt;/``&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;pre&gt;
if x == 1 &amp;amp;&amp;amp; y &amp;lt; 0
&lt;/pre&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<pre>
if x == 1 &amp;&amp; y &lt; 0
</pre>
</li>
</ul>
<h3 id="inline-code"><a class="self-link" href="#inline-code"></a>
Inline code element
</h3>
<div class="boxed">
<code>&lt;`&gt; {content} &lt;/`&gt;</code>
</div>
<p>
Converted to a <code>&lt;code&gt;</code> element,
with automatic escaping of <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code>
for <code>{content}</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;`&gt; if x == 1 &amp;&amp; y &lt; 0 &lt;/`&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;code&gt; if x == 1 &amp;amp;&amp;amp; y &amp;lt; 0 &lt;/code&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<code> if x == 1 &amp;&amp; y &lt; 0 </code>
</li>
</ul>
<h3 id="html-comment"><a class="self-link" href="#html-comment"></a>
HTML comment element
</h3>
<div class="boxed">
<code> {horizontal whitespace} &lt;!-- {content} --&gt; </code>
</div>
<p>
Removed. (You can comment as much as you like in the CCH source file
without increasing the size of the output HTML file.)
</p>
<h3 id="html-script"><a class="self-link" href="#html-script"></a>
HTML script element
</h3>
<div class="boxed">
<code> &lt;script&gt; {content} &lt;/script&gt; </code>
</div>
<p>
<a href="#whitespace" title="Whitespace">Whitespace is removed</a>,
but <code>{content}</code> is otherwise unchanged.
</p>
<h3 id="user-defined-definition"><a class="self-link" href="#user-defined-definition"></a>
User-defined definition element
</h3>
<div class="boxed">
<code>&lt;% {old string} | {new string} %&gt;</code>
</div>
<p>
The most powerful element of all.
</p>
<ul>
<li>
<code>{old string}</code> is the string to be replaced, and
</li>
<li>
<code>{new string}</code> is the replacement string.
</li>
</ul>
<p>
<code>{old string}</code> cannot contain \, |, ~, &lt; or &gt;,
and must begin with two non-whitespace characters
(to make it escapable using the literal empty string escape <code>\!</code>).
</p>
<p>
It is recommended that neither <code>{old string}</code> nor <code>{new string}</code>
contain manual insertions of the private-use character <code>U+E000</code>,
since that character is used internally for replacements.
It is most probably possible to break the converter
by supplying replacements which interfere with other CCH replacements;
do so at your own peril.
</p>
<p>
First the converter reads and removes all the definitions;
then it applies the replacements in <em>reverse</em> order.
Therefore nesting will work as long as
the referenced definition appears higher up in the markup.
Only one definition per <code>{old string}</code> is permitted;
any subsequent definitions for the same <code>{old string}</code>
will result in an error message.
</p>
<p>
To write an <code>{old string}</code> literally,
use a literal empty string escape <code>\!</code>
between any two of its non-whitespace characters.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;% [cch] | Conway's concise HTML %&gt;
&lt;% [cch-good] | [cch] is good %&gt;

[cch-good]. &lt;br&gt;
A literal [\!cch] rendered from [cch]. &lt;br&gt;
Definitions may be given after calls: [y]. &lt;br&gt;

&lt;% [y] | yes %&gt;

[dupes] are bad.

&lt;% [dupes] | Duplicate definitions %&gt;
&lt;% [dupes] | This re-definition will cause an error %&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
Conway's concise HTML is good.<br>
A literal [cch] rendered from Conway's concise HTML.<br>
Definitions may be given after calls: yes.<br>
Duplicate definitions are bad.
<span class="cch-error">CCH error: User-defined replacement for [dupes] defined twice.</span>
</li>
</ul>
<h3 id="display-maths"><a class="self-link" href="#display-maths"></a>
Display maths element
</h3>
<div class="boxed">
<code>&lt;$$&gt; {content} &lt;/$$&gt;</code>
</div>
<p>
Converted to a <code>&lt;div class="maths"&gt;</code> element for a
<a href="/code/katex-guide.html" title="How to render mathematical equations using KaTeX">KaTeX</a>
display equation, with automatic escaping of <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code>,
and automatic de-indentation, for <code>{content}</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;$$&gt;
  \begin{aligned}
    1 + 1 &amp;= 2 \\
    1 + 1 &amp;&lt; 3
  \end{aligned}
&lt;/$$&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;div class="maths"&gt;
\begin{aligned}
  1 + 1 &amp;amp;= 2 \\
  1 + 1 &amp;amp;&amp;lt; 3
\end{aligned}
&lt;/div&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<div class="maths">
\begin{aligned}
  1 + 1 &amp;= 2 \\
  1 + 1 &amp;&lt; 3
\end{aligned}
</div>
</li>
</ul>
<h3 id="inline-maths"><a class="self-link" href="#inline-maths"></a>
Inline maths element
</h3>
<div class="boxed">
<code>&lt;$&gt; {content} &lt;/$&gt;</code>
</div>
<p>
Converted to a <code>&lt;span class="maths"&gt;</code> element for a
<a href="/code/katex-guide.html" title="How to render mathematical equations using KaTeX">KaTeX</a>
inline equation, with automatic escaping of <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code>
for <code>{content}</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;$&gt; 1 + 1 &lt; 3 &lt;/$&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;span class="maths"&gt; 1 + 1 &amp;lt; 3 &lt;/span&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<span class="maths"> 1 + 1 &lt; 3 </span>
</li>
</ul>
<h3 id="inline-maths-definition"><a class="self-link" href="#inline-maths-definition"></a>
Inline maths definition element
</h3>
<div class="boxed">
<code>&lt;$d&gt; {content} &lt;/$d&gt;</code>
</div>
<p>
Converted to a <code>&lt;span class="maths embedded-definitions"&gt;</code> element,
with automatic escaping of <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code>
for <code>{content}</code>.
This does not display, and should be used to hold
<a href="/code/katex-guide.html" title="How to render mathematical equations using KaTeX">KaTeX</a>
<code>\gdef</code> definitions.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;$d&gt; \gdef\f#1#2{\cos(#1 \pi x) \cos(#2 \pi y)} &lt;/$d&gt;
&lt;$$&gt; \f{m}{n} + \f{n}{m} &lt;/$$&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<span class="maths embedded-definitions"> \gdef\f#1#2{\cos(#1 \pi x) \cos(#2 \pi y)} </span>
<div class="maths">\f{m}{n} + \f{n}{m} </div>
</li>
</ul>
<h2 id="zero-argument"><a class="self-link" href="#zero-argument"></a>
Zero-argument elements
</h2>
<h3 id="item-anchor-abbreviation"><a class="self-link" href="#item-anchor-abbreviation"></a>
Item anchor abbreviation element
</h3>
<div class="boxed">
<code>&lt;@i{type}&gt;&lt;/@i{type}&gt;</code>
</div>
<p>
Pre-defined abbreviations for
<a href="#item-anchor" title="Item anchor element">item anchors</a>.
</p>
<div class="centred-flex"><div class="overflowing"><table>
<tr>
<th><code>{type}</code></th>
<th><code>{content}</code></th>
<th><code>{href}</code></th>
<th><code>{title}</code></th>
</tr>
<tr>
<td><code>h</code></td>
<td>Home</td>
<td>/</td>
<td>Home page</td>
</tr>
<tr>
<td><code>t</code></td>
<td>Top</td>
<td>#</td>
<td>Jump back to top</td>
</tr>
<tr>
<td><code>i</code></td>
<td>Intro</td>
<td>#introduction</td>
<td>Introduction</td>
</tr>
<tr>
<td><code>n</code></td>
<td>Translation</td>
<td>#translation</td>
<td>Translation</td>
</tr>
<tr>
<td><code>r</code></td>
<td>Result</td>
<td>#result</td>
<td>Skip to the result</td>
</tr>
<tr>
<td><code>c</code></td>
<td>Cite</td>
<td>#cite</td>
<td>Cite this page</td>
</tr>
</table></div></div>
<p>
For example, the navigation bar at the top of this page is generated using
</p>
<pre>
&lt;=h&gt;
  &lt;@ih&gt;&lt;/@ih&gt;
  &lt;@it&gt;&lt;/@it&gt;
  &lt;@ic&gt;&lt;/@ic&gt;
&lt;/=h&gt;
</pre>
<h3 id="assisting-romanisation-radio"><a class="self-link" href="#assisting-romanisation-radio"></a>
Assisting romanisation radio element
</h3>
<div class="boxed">
<code>&lt;^^&gt;&lt;/^^&gt;</code>
</div>
<p>
Only the first occurrence is replaced.
</p>
<p>
Converted to the radio controller for
<a href="#assisting-romanisation" title="Assisting romanisation element">assisting romanisations</a>.
</p>
<ul>
<li>
<b>Rendered</b>
<div class="romanisation-radio">
<noscript>Enable Javascript for romanisation toggling to work.</noscript>
Romanisation&nbsp;(<kbd>F2</kbd>):&nbsp;<span lang="zh-Hant">音標</span><span class="romanisation romanisation-conway">&nbsp;(yam peeu)</span><span class="romanisation romanisation-wadegiles">&nbsp;(yin piao)</span><span class="romanisation romanisation-pinyin">&nbsp;(yin biao)</span><br>
<input type="radio" name="romanisation" id="romanisation-none" value="none">
<label for="romanisation-none">None</label>
<input type="radio" name="romanisation" id="romanisation-conway" value="conway">
<label for="romanisation-conway">Conway</label>
<input type="radio" name="romanisation" id="romanisation-wadegiles" value="wadegiles">
<label for="romanisation-wadegiles">Wade–Giles</label>
<input type="radio" name="romanisation" id="romanisation-pinyin" value="pinyin">
<label for="romanisation-pinyin">Pinyin</label>
</div>
</li>
</ul>
<h3 id="svg-style-abbreviation"><a class="self-link" href="#svg-style-abbreviation"></a>
SVG style abbreviation element
</h3>
<div class="boxed">
<code>&lt;-{type}&gt;&lt;/-{type}&gt;</code>
</div>
<p>
Pre-defined abbreviations for SVG styles,
for
strokes (<code>{type}</code>&nbsp;<code>s</code>),
text (<code>{type}</code>&nbsp;<code>t</code>),
maths (<code>{type}</code>&nbsp;<code>m</code>),
line colour (<code>{type}</code>&nbsp;<code>lc</code>) and
text colour (<code>{type}</code>&nbsp;<code>tc</code>).
Must be used inside an
<a href="#svg-style-container" title="SVG style container element">SVG style container element</a>.
</p>
<h2 id="multiple-argument"><a class="self-link" href="#multiple-argument"></a>
Multiple-argument elements
</h2>
<p>
Arguments are to be delimited by the pipe character <code>|</code>.
For a literal pipe, use the <a href="#escapes" title="Escapes">backslash escape</a>
<code>\|</code>.
</p>
<p>
Elements may be nested provided the inner element occurs
strictly higher in this list
(except the <a href="#preamble" title="Preamble element">preamble</a>,
which must be supplied at the very beginning of the CCH source file).
</p>
<h3 id="dialogue-image"><a class="self-link" href="#dialogue-image"></a>
Dialogue image element
</h3>
<div class="boxed">
<code>&lt;+{pos}&gt; {src} | {alt} &lt;/+{pos}&gt;</code>
</div>
<p>
Converted to an <code>&lt;img&gt;</code> element
for the host (<code>{pos}</code>&nbsp;<code>h</code>) or the guest (<code>{pos}</code>&nbsp;<code>g</code>),
and to be used inside a
<a href="#dialogue-division" title="Dialogue division element">dialogue division element</a>.
</p>
<h3 id="image"><a class="self-link" href="#image"></a>
Image element
</h3>
<div class="boxed">
<code>&lt;+&gt; {src} | {alt} [| title [| width [| class]]] &lt;/+&gt;</code>
</div>
<p>
Converted to an <code>&lt;img&gt;</code> element.
Passing the empty string (or only whitespace) to
any of <code>[title]</code>, <code>[width]</code> or <code>[class]</code>
is equivalent to omitting them.
</p>
<p>
<code>&amp;</code>, <code>&lt;</code>, <code>&gt;</code> and <code>"</code> are automatically escaped as
<code>&amp;amp;</code>, <code>&amp;lt;</code>, <code>&amp;gt;</code> and <code>&amp;quot;</code> in all arguments.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;+&gt;
  /favicon-32x32.png
  | Site favicon: two crescents
  | &amp;, &lt;, &gt;, and " are automatically escaped.
    Alternatively you may use backslash escapes (\&amp;, \&lt;, \&gt;)
    for the first three of these.
&lt;/+&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;img src="/favicon-32x32.png" alt="Site favicon: two crescents" title="&amp;amp;, &amp;lt;, &amp;gt;, and &amp;quot; are automatically escaped.
Alternatively you may use backslash escapes (&amp;amp;, &amp;lt;, &amp;gt;)
for the first three of these."&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<img src="/favicon-32x32.png" alt="Site favicon: two crescents" title="&amp;, &lt;, &gt;, and &quot; are automatically escaped.
Alternatively you may use backslash escapes (&amp;, &lt;, &gt;)
for the first three of these.">
</li>
</ul>
<h3 id="assisting-romanisation"><a class="self-link" href="#assisting-romanisation"></a>
Assisting romanisation element
</h3>
<div class="boxed">
<code>{horizontal whitespace} &lt;^&gt; {conway} | {wadegiles} | {pinyin} &lt;/^&gt;</code>
</div>
<p>
Converted to <code>&lt;span&gt;</code> elements controlled by the
<a href="#assisting-romanisation-radio" title="Assisting romanisation radio element">assisting romanisation radio</a>,
where all arguments are unescaped after the manner of the
<a href="#text-romanisation" title="Text romanisation element">text romanisation element</a>.
The preceding horizontal whitespace is stripped.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
絲 &lt;^&gt; see1 | ssuu1 | si= &lt;/^&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<span lang="zh-Hant">絲</span><span class="romanisation romanisation-conway">&nbsp;(see1)</span><span class="romanisation romanisation-wadegiles">&nbsp;(ssŭ1)</span><span class="romanisation romanisation-pinyin">&nbsp;(sī)</span>
</li>
</ul>
<h3 id="cantonese-mandarin-romanisation"><a class="self-link" href="#cantonese-mandarin-romanisation"></a>
Cantonese &amp; Mandarin romanisation element
</h3>
<div class="boxed">
<code>&lt;^cm[gov]&gt; {cantonese} | {mandarin} [| government] &lt;/^cm[gov]&gt;</code>
</div>
<p>
If <code>[gov]</code> is supplied (<code>g</code>) then <code>[government]</code> is required.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
惡，平聲， &lt;^cm&gt; woo1 | wu= &lt;/^cm&gt; &lt;br&gt;
勝，平聲， &lt;^cmg&gt; shing1 | she=ng | she\ng &lt;/^cmg&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<span lang="zh-Hant">惡，平聲，</span>
<a href="/cantonese/conway-romanisation.html" title="Conway's Custom Romanisation for Cantonese">Cantonese</a>:&nbsp;woo1,
Mandarin:&nbsp;wū<br>
<span lang="zh-Hant">勝，平聲，</span>
<a href="/cantonese/conway-romanisation.html" title="Conway's Custom Romanisation for Cantonese">Cantonese</a>:&nbsp;shing1,
Mandarin:&nbsp;shēng, Government-regulated Mandarin (<span lang="zh-Hant">統讀</span>):&nbsp;shèng
</li>
</ul>
<h3 id="directed-triangle-anchor"><a class="self-link" href="#directed-triangle-anchor"></a>
Directed triangle anchor element
</h3>
<div class="boxed">
<code>&lt;@{dir}&gt; {content} | {id} [| title] &lt;/@{dir}&gt;</code>
</div>
<p>
Converted to the equivalent
<a href="#anchor" title="Anchor element">anchor element</a>
with an upward or downward triangle if <code>{dir}</code> is <code>u</code> or <code>d</code>.
Usually used in
<a href="#link-division" title="Link division element">link divisions</a>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;@d&gt; Link division element | link-division &lt;/@d&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<a href="#link-division">[▼&thinsp;Link division element]</a>
</li>
</ul>
<h3 id="item-anchor"><a class="self-link" href="#item-anchor"></a>
Item anchor element
</h3>
<div class="boxed">
<code>&lt;@i&gt; {content} | {href} [| title] &lt;/@i&gt;</code>
</div>
<p>
Converted to the equivalent
<a href="#anchor" title="Anchor element">anchor element</a>
wrapped inside a list item <code>&lt;li&gt;</code> element, usually to be used inside
<a href="#header-navigation-bar" title="Header navigation bar element">navigation bar elements</a>.
</p>
<h3 id="heading-self-link-anchor"><a class="self-link" href="#heading-self-link-anchor"></a>
Heading self-link anchor element
</h3>
<div class="boxed">
<code>&lt;@{level}&gt; {content} | {id} &lt;/@{level}&gt;</code>
</div>
<p>
Converted to a heading of <code>{level}</code> <code>2</code>, <code>3</code> or <code>4</code>,
with a self-link to its left.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;@4&gt; A level~4 heading | level-4 &lt;/@4&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<h4 id="level-4"><a class="self-link" href="#level-4"></a>
A level&nbsp;4 heading
</h4>
</li>
</ul>
<h3 id="anchor"><a class="self-link" href="#anchor"></a>
Anchor element
</h3>
<div class="boxed">
<code>&lt;@&gt; {content} | {href} [| title] &lt;/@&gt;</code>
</div>
<p>
Converted to an <code>&lt;a&gt;</code> element.
If the empty string (or only whitespace) is passed to <code>[title]</code>,
the title defaults to <code>{content}</code> with all the necessary escaping.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;@&gt;
  This link, with "quotes", {italics} and \{literal curly brackets\},
  has no title.
  | https://en.wikipedia.org/wiki/Main_Page
&lt;/@&gt; &lt;br&gt;
&lt;@&gt;
  This link, with "quotes", {italics} and \{literal curly brackets\},
  has the same title as its content (with proper escaping).
  | https://en.wikipedia.org/wiki/Main_Page
  |
&lt;/@&gt; &lt;br&gt;
&lt;@&gt;
  This link, with "quotes", {italics} and \{literal curly brackets\},
  has a custom title.
  | https://en.wikipedia.org/wiki/Main_Page
  | Wikipedia, the free encyclopedia
&lt;/@&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<a href="https://en.wikipedia.org/wiki/Main_Page">This link, with "quotes", <i>italics</i> and {literal curly brackets},
has no title.</a><br>
<a href="https://en.wikipedia.org/wiki/Main_Page" title="This link, with &quot;quotes&quot;, italics and {literal curly brackets},
has the same title as its content (with proper escaping).">This link, with "quotes", <i>italics</i> and {literal curly brackets},
has the same title as its content (with proper escaping).</a><br>
<a href="https://en.wikipedia.org/wiki/Main_Page" title="Wikipedia, the free encyclopedia">This link, with "quotes", <i>italics</i> and {literal curly brackets},
has a custom title.</a>
</li>
</ul>
<h3 id="boxed-translation"><a class="self-link" href="#boxed-translation"></a>
Boxed translation element
</h3>
<div class="boxed">
<code>&lt;#t[size]&gt; {chinese} | {english} &lt;/#t[size]&gt;</code>
</div>
<p>
Converted to a <code>&lt;div class="boxed translation"&gt;</code> element,
with the additional class <code>not-large</code>
if <code>[size]</code> is supplied as <code>n</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;#t&gt;
  是謂序。 | This be {the} preface.
&lt;/#t&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<div class="boxed translation">
<span lang="zh-Hant">是謂序。</span>
<hr>
This be <i>the</i> preface.
</div>
</li>
</ul>
<h3 id="sun-tzu-heading"><a class="self-link" href="#sun-tzu-heading"></a>
Sun&nbsp;Tzŭ heading element
</h3>
<div class="boxed">
<code>&lt;;sh&gt; {volume} | {paragraph} | {content} &lt;/;sh&gt;</code>
</div>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;;sh&gt; 1 | 5 | &lt;$&gt;\pi \approx 3&lt;/$&gt;, &lt;$&gt;\sqrt{2} \approx 7/5&lt;/$&gt; &lt;/;sh&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<h3 id="5"><a class="self-link" href="#5"></a>
Vol.&nbsp;I&nbsp;¶5.
<span class="heading"><span class="maths">\pi \approx 3</span>, <span class="maths">\sqrt{2} \approx 7/5</span></span>
</h3>
</li>
</ul>
<h3 id="sun-tzu-link-division"><a class="self-link" href="#sun-tzu-link-division"></a>
Sun&nbsp;Tzŭ link division element
</h3>
<div class="boxed">
<code>&lt;;s@@&gt; {volume} | {paragraph} | {a p} | {b p} | {c p} | {c q} | {d p} &lt;/;s@@&gt;</code>
</div>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;;s@@&gt; 1 | 5 | 6 | 147 | 52061 | 4 | 13 &lt;/;s@@&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<div class="links">
<a href="#paragraphs" title="Volume I: Paragraph navigation">[▲&thinsp;Paragraphs]</a>
<a href="/manuscripts/sun-tzu-i-5.pdf" title="Translation manuscript for Vol. I ¶5">[manuscript]</a>
<a href="https://archive.org/details/02094034.cn/page/n6" title="Version A: 02094034.cn at archive.org">A6</a>
<a href="https://commons.wikimedia.org/w/index.php?title=File%3A%E6%96%87%E6%B7%B5%E9%96%A3%E5%9B%9B%E5%BA%AB%E5%85%A8%E6%9B%B8_0797%E5%86%8A.djvu&amp;page=147" title="Version B: 《文淵閣四庫全書》第0797冊 at Wikimedia Commons">B147(142)</a>
<a href="https://ctext.org/sunzi-suan-jing#n52061" title="Version C: ctext.org database page">C52061(1.4)</a>
<a href="https://ctext.org/library.pl?if=en&amp;file=86926&amp;page=13" title="Version D: 《知不足齋叢書》本 at ctext.org library">D13</a>
</div>
</li>
</ul>
<h3 id="preamble"><a class="self-link" href="#preamble"></a>
Preamble element
</h3>
<div class="boxed">
<code>&lt;*&gt; {title} | {first created} | {last modified} [| rendering [| description [| css [| js]]]] &lt;/*&gt;</code>
</div>
<p>
Must be supplied at the very beginning of the CCH source file.
Only the first occurrence is replaced.
</p>
<p>
Automatically generates the <code>&lt;!DOCTYPE html&gt;</code> declaration
and the <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> elements.
</p>
<ul>
<li>
<code>{title}</code> is the text which appears in the <code>&lt;title&gt;</code> element,
</li>
<li>
<code>{first created}</code> and <code>{last modified}</code>
are stored for use later in the
<a href="#page-properties" title="Page properties element">page properties</a>
and <a href="#footer" title="Footer element">footer (copyright)</a> elements,
</li>
<li>
<code>[rendering]</code> loads the relevant CSS and Javascript required
for displaying today's date in the
<a href="#cite-this-page" title="Cite this page element">Cite this page</a>,
for KaTeX <a href="#display-maths" title="Display maths element">maths equations</a>
and for
<a href="#assisting-romanisation" title="Assisting romanisation element">assisting romanisations</a>,
if the supplied string contains
<code>d</code>, <code>m</code> and <code>r</code> respectively,
</li>
<li>
<code>[description]</code> is the text which appears
in the description meta element, and
</li>
<li>
<code>[css]</code> specifies embedded CSS, and
</li>
<li>
<code>[js]</code> specifies <code>body onload</code> JavaScript.
</li>
</ul>
<h3 id="page-properties"><a class="self-link" href="#page-properties"></a>
Page properties element
</h3>
<div class="boxed">
<code>&lt;*p&gt; [see also] [| misc] &lt;/*p&gt;</code>
</div>
<p>
Only the first occurrence is replaced.
</p>
<p>
Automatically generates the page properties paragraph,
using the <code>{first created}</code> and <code>{last modified}</code> dates
supplied to the <a href="#preamble" title="Preamble element">preamble</a>.
</p>
<h3 id="cite-this-page"><a class="self-link" href="#cite-this-page"></a>
Cite this page element
</h3>
<div class="boxed">
<code>&lt;*c&gt; {text heading} | {tex key} | {tex heading} [| inconvenience message] &lt;/*c&gt;</code>
</div>
<p>
Only the first occurrence is replaced.
</p>
<p>
Automatically generates the Cite this page section,
with automatic escaping of <code>~</code>, <code>{</code> and <code>}</code> for
<code>{tex heading}</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;*c&gt;
  Python: a regex converter from CCH to HTML
  | cch
  | {Python}: a regex converter from {CCH} to {HTML}
&lt;/*c&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<h2 id="cite"><a class="self-link" href="#cite"></a>
Cite this page
</h2>
<ul>
<li>Text:
<p>
Conway&nbsp;(2020).
Python: a regex converter from CCH to HTML.
&lt;https://yawnoc.github.io/code/cch.html&gt;
[Accessed <span class="date">d&nbsp;month&nbsp;yyyy</span>]
</p>
</li>
<li>BibTeX:
<pre>
@misc{conway-cch,
  author = {Conway},
  year = {2020},
  title = {{Python}: a regex converter from {CCH} to {HTML}},
  howpublished = {\url{https://yawnoc.github.io/code/cch.html}},
  note = {[Accessed <span class="date">d~month~yyyy</span>]}
}
</pre>
</li>
<li>BibLaTeX:
<pre>
@online{conway-cch,
  author = {Conway},
  year = {2020},
  title = {{Python}: a regex converter from {CCH} to {HTML}},
  url = {https://yawnoc.github.io/code/cch.html},
  urldate = {<span class="date">yyyy-mm-dd</span>}
}
</pre>
</li>
</ul>
</li>
</ul>
<h3 id="footer"><a class="self-link" href="#footer"></a>
Footer element
</h3>
<div class="boxed">
<code>&lt;*f&gt; [copyright exception] [| ending remark] &lt;/*f&gt;</code>
</div>
<p>
Only the first occurrence is replaced.
</p>
<p>
Converted to a <code>&lt;footer&gt;</code> element,
with the copyright year range automatically determined from
<code>{first created}</code> and <code>{last modified}</code>
supplied to the <a href="#preamble" title="Preamble element">preamble</a>.
</p>
<h2 id="single-argument"><a class="self-link" href="#single-argument"></a>
Single-argument elements
</h2>
<h3 id="assisting-numeral"><a class="self-link" href="#assisting-numeral"></a>
Assisting numeral element
</h3>
<div class="boxed">
<code>{horizontal whitespace} &lt;_&gt;{content}&lt;/_&gt;</code>
</div>
<p>
Converted to a <code>&lt;span&gt;</code> element,
with simple markup for <code>{content}</code> after the manner of the
<a href="#text-numeral" title="Text numeral element">text numeral element</a>.
The preceding horizontal whitespace is stripped.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
Tiny &lt;_&gt;3 * 10^-12&lt;/_&gt;.
</pre>
</li>
<li>
<b>HTML</b>
<pre>
Tiny&lt;span class="numeral"&gt;&amp;nbsp;(3 × 10&lt;sup&gt;−12&lt;/sup&gt;)&lt;/span&gt;.
</pre>
</li>
<li>
<b>Rendered</b><br>
Tiny<span class="numeral">&nbsp;(3 × 10<sup>−12</sup>)</span>.
</li>
</ul>
<h3 id="formatted-span"><a class="self-link" href="#formatted-span"></a>
Formatted span element
</h3>
<div class="boxed">
<code>&lt;:{type}&gt;{content}&lt;/:{type}&gt;</code>
</div>
<p>
Converted to <code>&lt;span&gt;</code> elements with various types of formatting.
</p>
<div class="centred-flex"><div class="overflowing"><table>
<tr>
<th><code>{type}</code></th>
<th>CCH</th>
<th>Rendered</th>
</tr>
<tr>
<td><code>r</code></td>
<td><code>&lt;:r&gt;red&lt;/:r&gt;</code></td>
<td><span class="red">red</span></td>
</tr>
<tr>
<td><code>g</code></td>
<td><code>&lt;:g&gt;green&lt;/:g&gt;</code></td>
<td><span class="green">green</span></td>
</tr>
<tr>
<td><code>b</code></td>
<td><code>&lt;:b&gt;blue&lt;/:b&gt;</code></td>
<td><span class="blue">blue</span></td>
</tr>
<tr>
<td><code>v</code></td>
<td><code>&lt;:v&gt;violet&lt;/:v&gt;</code></td>
<td><span class="violet">violet</span></td>
</tr>
<tr>
<td><code>y</code></td>
<td><code>&lt;:y&gt;light-yellow&lt;/:y&gt;</code></td>
<td><span class="lightyellow">light-yellow</span></td>
</tr>
<tr>
<td><code>h</code></td>
<td><code>&lt;:h&gt;highlighted part&lt;/:h&gt;</code></td>
<td><span class="highlighted-part">highlighted part</span></td>
</tr>
<tr>
<td><code>t</code></td>
<td><code>&lt;:t&gt;thought&lt;/:t&gt;</code></td>
<td><span class="thought">thought</span></td>
</tr>
</table></div></div>
<h3 id="boxed-division"><a class="self-link" href="#boxed-division"></a>
Boxed division element
</h3>
<div class="boxed">
<code>&lt;#[type]&gt;{content}&lt;/#[type]&gt;</code>
</div>
<p>
Converted to boxed <code>&lt;div&gt;</code> element, with centred or not-large text
if <code>[type]</code> is supplied as <code>c</code> or <code>n</code>.
</p>
<p>
For example, the boxed division above is generated using
</p>
<pre>
&lt;#&gt;
  &lt;`&gt;&lt;#[type]&gt;{content}&lt;/#[type]&gt;&lt;/`&gt;
&lt;/#&gt;
</pre>
<h3 id="dialogue-division"><a class="self-link" href="#dialogue-division"></a>
Dialogue division element
</h3>
<div class="boxed">
<code>&lt;~~&gt;{content}&lt;/~~&gt;</code>
</div>
<p>
Converted to a <code>&lt;div&gt;</code> element, for holding a dialogue
between a host and a guest, which comprises of
<a href="#dialogue-image" title="Dialogue image element">dialogue images</a> and
<a href="#dialogue-paragraph" title="Dialogue paragraph element">dialogue paragraphs</a>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;~~&gt;
  
  &lt;+h&gt; /res/dialogue-host.png | Host &lt;/+h&gt;
  &lt;~h&gt;
    I am the host; my words and thoughts are in blue.
  &lt;/~h&gt;
  &lt;~ht&gt;
    \{Thoughts are in &lt;@&gt; Comic Neue | http://comicneue.com/ &lt;/@&gt;,
    against a light-pink background.\}
  &lt;/~ht&gt;
  
  &lt;+g&gt; /res/dialogue-guest.png | Guest &lt;/+g&gt;
  &lt;~g&gt;
    I am the guest; my words are thoughts are in black.
  &lt;/~g&gt;
  &lt;~gt&gt;
    \{My thoughts are against a light-pink background also,
    and our images are automatically framed in our respectively colours.
    Also words and thoughts can span multiple paragraphs each,
    and will wrap around the image
    of the corresponding speaker or thinker.\}
  &lt;/~gt&gt;
  &lt;~gt&gt;
    \{The dialogue is automatically concluded with "END"
    in a &lt;`&gt;&lt;div&gt;&lt;/`&gt; element.\}
  &lt;/~gt&gt;
  
&lt;/~~&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<div class="dialogue">
<img class="dialogue-host" src="/res/dialogue-host.png" alt="Host">
<p class="dialogue-host">
I am the host; my words and thoughts are in blue.
</p>
<p class="dialogue-host thought">
{Thoughts are in <a href="http://comicneue.com/">Comic Neue</a>,
against a light-pink background.}
</p>
<img class="dialogue-guest" src="/res/dialogue-guest.png" alt="Guest">
<p class="dialogue-guest">
I am the guest; my words are thoughts are in black.
</p>
<p class="dialogue-guest thought">
{My thoughts are against a light-pink background also,
and our images are automatically framed in our respectively colours.
Also words and thoughts can span multiple paragraphs each,
and will wrap around the image
of the corresponding speaker or thinker.}
</p>
<p class="dialogue-guest thought">
{The dialogue is automatically concluded with "END"
in a <code>&lt;div&gt;</code> element.}
</p>
<div class="end">END</div>
</div>
</li>
</ul>
<h3 id="dialogue-paragraph"><a class="self-link" href="#dialogue-paragraph"></a>
Dialogue paragraph element
</h3>
<div class="boxed">
<code>&lt;~{pos}[type]&gt;{content}&lt;/~{pos}[type]&gt;</code>
</div>
<p>
Converted to a <code>&lt;p&gt;</code> element for the host's (<code>{pos}</code>&nbsp;<code>h</code>)
or the guest's (<code>{pos}</code>&nbsp;<code>g</code>) words in a dialogue,
or thoughts if <code>[type]</code> is supplied as <code>t</code>, and to be used inside a
<a href="#dialogue-division" title="Dialogue division element">dialogue division element</a>.
</p>
<h3 id="link-division"><a class="self-link" href="#link-division"></a>
Link division element
</h3>
<div class="boxed">
<code>&lt;@@&gt;{content}&lt;/@@&gt;</code>
</div>
<p>
Converted to a <code>&lt;div class="links"&gt;</code> element, for holding
<a href="#anchor" title="Anchor element">anchor elements</a>.
</p>
<h3 id="header-navigation-bar"><a class="self-link" href="#header-navigation-bar"></a>
Header navigation bar element
</h3>
<div class="boxed">
<code>&lt;=h&gt;{content}&lt;/=h&gt;</code>
</div>
<p>
Converted to the equivalent
<a href="#navigation-bar" title="Navigation bar element">navigation bar element</a>
wrapped inside a <code>&lt;header&gt;</code> element,
and usually to be filled with
<a href="#item-anchor" title="Item anchor element">item anchors</a>.
</p>
<h3 id="navigation-bar"><a class="self-link" href="#navigation-bar"></a>
Navigation bar element
</h3>
<div class="boxed">
<code>&lt;=&gt;{content}&lt;/=&gt;</code>
</div>
<p>
Converted to a <code>&lt;nav&gt;</code> element containing a <code>&lt;ul&gt;</code> element,
and usually to be filled with
<a href="#item-anchor" title="Item anchor element">item anchors</a>.
</p>
<h3 id="note-paragraph"><a class="self-link" href="#note-paragraph"></a>
Note paragraph element
</h3>
<div class="boxed">
<code>&lt;.&gt;{content}&lt;/.&gt;</code>
</div>
<p>
Converted to a <code>&lt;p class="note"&gt;</code> element.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;.&gt;
  &lt;b&gt;Note.&lt;/b&gt; This is a note paragraph. The font is smaller.
&lt;/.&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<p class="note">
<b>Note.</b> This is a note paragraph. The font is smaller.
</p>
</li>
</ul>
<h3 id="overflowing-division"><a class="self-link" href="#overflowing-division"></a>
Overflowing division element
</h3>
<div class="boxed">
<code>&lt;![type]&gt;{content}&lt;/![type]&gt;</code>
</div>
<p>
Converted to a <code>&lt;div class="overflowing"&gt;</code> element,
wrapped inside a <code>&lt;div class="centred-flex"&gt;</code> element
for <code>[type]</code>&nbsp;<code>c</code>,
and with additional class <code>centred-text</code>
and wrapped inside a <code>&lt;div class="centred-flex"&gt;</code> element
for <code>[type]</code>&nbsp;<code>cc</code>.
</p>
<h3 id="svg-style-container"><a class="self-link" href="#svg-style-container"></a>
SVG style container element
</h3>
<div class="boxed">
<code>&lt;--&gt;{content}&lt;/--&gt;</code>
</div>
<p>
Converted to a <code>&lt;style&gt;</code> element wrapped inside
a <code>&lt;svg class="embedded-styles"&gt;</code> element,
with all the necessary escaping automatically performed
for the <a href="#escapes" title="Escapes">special Conway literals</a>
<code>~</code>, <code>{</code> and <code>}</code>.
</p>
<h3 id="text-romanisation"><a class="self-link" href="#text-romanisation"></a>
Text romanisation element
</h3>
<div class="boxed">
<code>&lt;^e&gt; {content} &lt;/^e&gt;</code>
</div>
<p>
Unescapes <code>{content}</code>, i.e.&nbsp;replaces entries in the CCH column
with the corresponding entries in the Rendered column
(these conversions are used for the arguments of
<a href="#assisting-romanisation" title="Assisting romanisation element">assisting romanisations elements</a>):
</p>
<div class="centred-flex"><div class="overflowing"><table>
<tr>
<th>CCH</th>
<th>Rendered</th>
<th>Code point</th>
</tr>
<tr>
<th colspan="3">Conway only</th>
</tr>
<tr>
<td><code>oe</code></td>
<td>œ</td>
<td><code>U+0153</code></td>
</tr>
<tr>
<th colspan="3">Wade–Giles only</th>
</tr>
<tr>
<td><code>e^</code></td>
<td>ê</td>
<td><code>U+00EA</code></td>
</tr>
<tr>
<td><code>uu</code></td>
<td>ŭ</td>
<td><code>U+016D</code></td>
</tr>
<tr>
<th colspan="3">Pinyin tone 1 (<span lang="zh-Hant">陰平</span> dark level) only</th>
</tr>
<tr>
<td><code>a=</code></td>
<td>ā</td>
<td><code>U+0101</code></td>
</tr>
<tr>
<td><code>e=</code></td>
<td>ē</td>
<td><code>U+0113</code></td>
</tr>
<tr>
<td><code>i=</code></td>
<td>ī</td>
<td><code>U+012B</code></td>
</tr>
<tr>
<td><code>o=</code></td>
<td>ō</td>
<td><code>U+014D</code></td>
</tr>
<tr>
<td><code>u=</code></td>
<td>ū</td>
<td><code>U+016B</code></td>
</tr>
<tr>
<td><code>u"=</code></td>
<td>ǖ</td>
<td><code>U+01D6</code></td>
</tr>
<tr>
<th colspan="3">Pinyin tone 2 (<span lang="zh-Hant">陽平</span> light level) only</th>
</tr>
<tr>
<td><code>a/</code></td>
<td>á</td>
<td><code>U+00E1</code></td>
</tr>
<tr>
<td><code>e/</code></td>
<td>é</td>
<td><code>U+00E9</code></td>
</tr>
<tr>
<td><code>i/</code></td>
<td>í</td>
<td><code>U+00ED</code></td>
</tr>
<tr>
<td><code>o/</code></td>
<td>ó</td>
<td><code>U+00F3</code></td>
</tr>
<tr>
<td><code>u/</code></td>
<td>ú</td>
<td><code>U+00FA</code></td>
</tr>
<tr>
<td><code>u"/</code></td>
<td>ǘ</td>
<td><code>U+01D8</code></td>
</tr>
<tr>
<th colspan="3">Pinyin tone 3 (<span lang="zh-Hant">上</span> rising) only</th>
</tr>
<tr>
<td><code>av</code></td>
<td>ǎ</td>
<td><code>U+01CE</code></td>
</tr>
<tr>
<td><code>ev</code></td>
<td>ě</td>
<td><code>U+011B</code></td>
</tr>
<tr>
<td><code>iv</code></td>
<td>ǐ</td>
<td><code>U+01D0</code></td>
</tr>
<tr>
<td><code>ov</code></td>
<td>ǒ</td>
<td><code>U+01D2</code></td>
</tr>
<tr>
<td><code>uv</code></td>
<td>ǔ</td>
<td><code>U+01D4</code></td>
</tr>
<tr>
<td><code>u"v</code></td>
<td>ǚ</td>
<td><code>U+01DA</code></td>
</tr>
<tr>
<th colspan="3">Pinyin tone 4 (<span lang="zh-Hant">去</span> departing) only</th>
</tr>
<tr>
<td><code>a\</code></td>
<td>à</td>
<td><code>U+00E0</code></td>
</tr>
<tr>
<td><code>e\</code></td>
<td>è</td>
<td><code>U+00E8</code></td>
</tr>
<tr>
<td><code>i\</code></td>
<td>ì</td>
<td><code>U+00EC</code></td>
</tr>
<tr>
<td><code>o\</code></td>
<td>ò</td>
<td><code>U+00F2</code></td>
</tr>
<tr>
<td><code>u\</code></td>
<td>ù</td>
<td><code>U+00F9</code></td>
</tr>
<tr>
<td><code>u"\</code></td>
<td>ǜ</td>
<td><code>U+01DC</code></td>
</tr>
<tr>
<th colspan="3">Common</th>
</tr>
<tr>
<td><code>u"</code></td>
<td>ü</td>
<td><code>U+00FC</code></td>
</tr>
</table></div></div>
<h3 id="text-numeral"><a class="self-link" href="#text-numeral"></a>
Text numeral element
</h3>
<div class="boxed">
<code>&lt;_e&gt;{content}&lt;/_e&gt;</code>
</div>
<p>
Simple markup for
exponents (<code>^</code>),
minus signs (<code>-</code>), and
times symbols (<code>*</code>).
</p>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;_e&gt;3 * 10^-12&lt;/_e&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
3 × 10&lt;sup&gt;−12&lt;/sup&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
3 × 10<sup>−12</sup>
</li>
</ul>
<h2 id="escapes"><a class="self-link" href="#escapes"></a>
Escapes
</h2>
<p>
"Escaped form" refers to the CCH,
while "unescaped form" refers to the HTML it gets converted into.
</p>
<div class="centred-flex"><div class="overflowing"><table>
<tr>
<th>CCH</th>
<th>HTML</th>
<th>Rendered</th>
<th>Note</th>
</tr>
<tr>
<th colspan="4">Functional Conway literals</th>
</tr>
<tr>
<td><code>\\</code></td>
<td><code>\</code></td>
<td>\</td>
<td>Literal backslash</td>
</tr>
<tr>
<td><code>\|</code></td>
<td><code>|</code></td>
<td>|</td>
<td>Literal pipe</td>
</tr>
<tr>
<th colspan="4">Special Conway literals</th>
</tr>
<tr>
<td><code>\~</code></td>
<td><code>~</code></td>
<td>~</td>
<td>Literal tilde</td>
</tr>
<tr>
<td><code>\--</code></td>
<td><code>--</code></td>
<td>--</td>
<td>Literal hyphen run (2 or more)</td>
</tr>
<tr>
<td><code>\{</code></td>
<td><code>{</code></td>
<td>{</td>
<td>
Literal opening <a href="#conway-italics" title="Conway italics">curly bracket</a>
</td>
</tr>
<tr>
<td><code>\}</code></td>
<td><code>}</code></td>
<td>}</td>
<td>
Literal closing <a href="#conway-italics" title="Conway italics">curly bracket</a>
</td>
</tr>
<tr>
<th colspan="4">Various symbols</th>
</tr>
<tr>
<td><code>\!</code></td>
<td><code></code></td>
<td></td>
<td>Literal empty string</td>
</tr>
<tr>
<td><code>~</code></td>
<td><code>&amp;nbsp;</code></td>
<td>&nbsp;</td>
<td>Non-breaking space</td>
</tr>
<tr>
<td><code>---</code></td>
<td><code>—</code></td>
<td>—</td>
<td><code>— U+2014 EM DASH</code></td>
</tr>
<tr>
<td><code>--</code></td>
<td><code>–</code></td>
<td>–</td>
<td><code>– U+2013 EN DASH</code></td>
</tr>
<tr>
<td><code>\.</code></td>
<td><code>・</code></td>
<td><span lang="zh-Hant">・</span></td>
<td><code>U+30FB KATAKANA MIDDLE DOT</code></td>
</tr>
<tr>
<td><code>\&amp;</code></td>
<td><code>&amp;amp;</code></td>
<td>&amp;</td>
<td>Ampersand</td>
</tr>
<tr>
<td><code>\&lt;</code></td>
<td><code>&amp;lt;</code></td>
<td>&lt;</td>
<td>Less than</td>
</tr>
<tr>
<td><code>\&gt;</code></td>
<td><code>&amp;gt;</code></td>
<td>&gt;</td>
<td>Greater than</td>
</tr>
<tr>
<td><code>\LORD</code></td>
<td>(very long)</td>
<td><span class="small-caps">Lord</span></td>
<td>"Lord" in small caps</td>
</tr>
<tr>
<td><code>\_</code></td>
<td><code>&amp;numsp;</code></td>
<td>&numsp;</td>
<td>Figure space</td>
</tr>
<tr>
<td><code>\,</code></td>
<td><code>&amp;thinsp;</code></td>
<td>&thinsp;</td>
<td>Thin space</td>
</tr>
<tr>
<td><code>\/</code></td>
<td colspan="3">https://github.com/yawnoc/yawnoc.github.io/blob/master/</td>
</tr>
<tr>
<td><code>\=</code></td>
<td colspan="3">https://github.com/yawnoc</td>
</tr>
<tr>
<td><code>\or</code></td>
<td>(very long)</td>
<td><span class="alternative-type">or</span></td>
<td>Alternative type "or"</td>
</tr>
<tr>
<td><code>\lit</code></td>
<td>(very long)</td>
<td><span class="alternative-type">lit.</span></td>
<td>Alternative type "lit."</td>
</tr>
<tr>
<td><code>\sic</code></td>
<td><code>&lt;i&gt;sic&lt;/i&gt;</code></td>
<td><i>sic</i></td>
<td>Italicised "sic"</td>
</tr>
<tr>
<th colspan="4">Conway literal Chinese run</th>
</tr>
<tr>
<td><code>\仁者，人也。</code></td>
<td><code>仁者，人也。</code></td>
<td>仁者，人也。</td>
<td>
Prevent
<a href="#automatic-chinese-span" title="Automatic Chinese language spans">language span</a>
</td>
</tr>
</table></div></div>
<p>
A backslash before a run of Chinese characters
prevents automatic surrounding by a <code>&lt;span lang="zh-Hant"&gt;</code> element.
(Here <span lang="zh-Hant">・</span> <code>U+30FB KATAKANA MIDDLE DOT</code> is considered a Chinese character.)
</p>
<h2 id="conway-italics"><a class="self-link" href="#conway-italics"></a>
Conway italics
</h2>
<p>
Curly brackets are automatically converted to italics tags.
For literal curly brackets use the
<a href="#escapes" title="Escapes">backslash escapes</a> <code>\{</code> and <code>\}</code>.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
An {italicised} word, followed by
{an italicised phrase containing a {nested-italic} part}.
</pre>
</li>
<li>
<b>HTML</b>
<pre>
An &lt;i&gt;italicised&lt;/i&gt; word, followed by
&lt;i&gt;an italicised phrase containing a &lt;i&gt;nested-italic&lt;/i&gt; part&lt;/i&gt;.
</pre>
</li>
<li>
<b>Rendered</b><br>
An <i>italicised</i> word, followed by
<i>an italicised phrase containing a <i>nested-italic</i> part</i>.
</li>
</ul>
<h2 id="whitespace"><a class="self-link" href="#whitespace"></a>
Whitespace
</h2>
<ol>
<li>
<code>&lt;pre&gt;</code> elements are de-indented
(but not affected by the subsequent removals),
</li>
<li>
Horizontal whitespace around <code>&lt;br&gt;</code> elements is removed,
</li>
<li>
Leading whitespace is removed,
</li>
<li>
Empty lines are removed,
</li>
<li>
Trailing whitespace is removed,
</li>
<li>
Newlines immediately following a backslash are removed
(i.e.&nbsp;backslash is the line continuation character),
</li>
<li>
Newlines immediately preceding <code>&lt;br&gt;</code> elements are removed, and
</li>
<li>
Whitespace for attributes is canonicalised with
(1)&nbsp;a single space before the attribute name, and
(2)&nbsp;no whitespace around the equals sign.
</li>
</ol>
<ul>
<li>
<b>CCH</b>
<pre>
&lt;pre&gt;
          A heavily indented line.
              A more heavily indented line.
&lt;/pre&gt;
&lt;p&gt;
  A line with leading whitespace. &lt;br&gt;
      A line followed by a blank line. &lt;br&gt;
      
  A line ending in a backslash\
      (stuff originally on the next line).
&lt;/p&gt;
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;pre&gt;
A heavily indented line.
    A more heavily indented line.
&lt;/pre&gt;
&lt;p&gt;
A line with leading whitespace.&lt;br&gt;
A line followed by a blank line.&lt;br&gt;
A line ending in a backslash(stuff originally on the next line).
&lt;/p&gt;
</pre>
</li>
<li>
<b>Rendered</b>
<pre>
A heavily indented line.
    A more heavily indented line.
</pre>
<p>
A line with leading whitespace.<br>
A line followed by a blank line.<br>
A line ending in a backslash(stuff originally on the next line).
</p>
</li>
</ul>
<h2 id="automatic-chinese-span"><a class="self-link" href="#automatic-chinese-span"></a>
Automatic Chinese language spans
</h2>
<p>
Runs of Chinese characters
(including <span lang="zh-Hant">・</span> <code>U+30FB KATAKANA MIDDLE DOT</code>),
and consecutive runs of
<a href="#formatted-span" title="Formatted span element">formatted spans</a>
containing these,
are automatically wrapped in a <code>&lt;span lang="zh-Hant"&gt;</code> element.
<a href="#escapes" title="Escapes">Precede runs by a backslash</a> to prevent this.
Literal empty strings <code>\!</code> may be used to split runs.
</p>
<ul>
<li>
<b>CCH</b>
<pre>
《禮記\.禮運》大道之行也，天下為公。 &lt;br&gt;
\《禮記\.禮運》大道之行也，天下為公。 &lt;br&gt;
黑、&lt;:r&gt;赤&lt;/:r&gt;、&lt;:g&gt;翠&lt;/:g&gt;、&lt;:b&gt;青&lt;/:b&gt;、&lt;:v&gt;紫&lt;/:v&gt;、&lt;:y&gt;黃&lt;/:y&gt;、\
  &lt;:h&gt;顯&lt;/:h&gt;、&lt;:t&gt;思&lt;/:t&gt;。 &lt;br&gt;
前\!後
</pre>
</li>
<li>
<b>HTML</b>
<pre>
&lt;span lang="zh-Hant"&gt;《禮記・禮運》大道之行也，天下為公。&lt;/span&gt;&lt;br&gt;
《禮記・禮運》大道之行也，天下為公。&lt;br&gt;
&lt;span lang="zh-Hant"&gt;黑、&lt;span class="red"&gt;赤&lt;/span&gt;、&lt;span class="green"&gt;翠&lt;/span&gt;、&lt;span class="blue"&gt;青&lt;/span&gt;、&lt;span class="violet"&gt;紫&lt;/span&gt;、&lt;span class="lightyellow"&gt;黃&lt;/span&gt;、&lt;span class="highlighted-part"&gt;顯&lt;/span&gt;、&lt;span class="thought"&gt;思&lt;/span&gt;。&lt;/span&gt;&lt;br&gt;
&lt;span lang="zh-Hant"&gt;前&lt;/span&gt;&lt;span lang="zh-Hant"&gt;後&lt;/span&gt;
</pre>
</li>
<li>
<b>Rendered</b><br>
<span lang="zh-Hant">《禮記・禮運》大道之行也，天下為公。</span><br>
《禮記・禮運》大道之行也，天下為公。<br>
<span lang="zh-Hant">黑、<span class="red">赤</span>、<span class="green">翠</span>、<span class="blue">青</span>、<span class="violet">紫</span>、<span class="lightyellow">黃</span>、<span class="highlighted-part">顯</span>、<span class="thought">思</span>。</span><br>
<span lang="zh-Hant">前</span><span lang="zh-Hant">後</span>
</li>
</ul>
<footer>
<hr>
©&nbsp;2019–2020&nbsp;Conway.
</footer>
</body>
</html>
